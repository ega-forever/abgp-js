!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.StoragePlain=t():e.StoragePlain=t()}(self,(()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0});class s{constructor(){this.db=new Map}async get(e){const t=this.db.get(e);return t?t.cloneObject():null}async save(e){this.db.set(e.hash,e.cloneObject())}async has(e){return this.db.has(e)}async getByTimestamp(e){return[...this.db.values()].filter((t=>t.timestamp===e)).map((e=>e.cloneObject()))}async getAfterTimestamp(e,t,s){return[...this.db.values()].filter((s=>s.timestamp>e||s.timestamp===e&&s.timestampIndex>t)).sort(((e,t)=>e.timestamp>t.timestamp||e.timestamp===t.timestamp&&e.timestampIndex>t.timestampIndex?1:-1)).slice(0,s).map((e=>e.cloneObject()))}async del(e){this.db.delete(e)}}class a{constructor(){this.db=new Map}async get(e){return this.db.get(e)||{timestamp:0,timestampIndex:-1,root:"0",publicKey:e}}async save(e){this.db.set(e.publicKey,e)}}t.default=class{constructor(){this.Record=new s,this.State=new a}}})(),e})()));